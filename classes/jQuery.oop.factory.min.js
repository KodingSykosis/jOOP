(function(n){n.scriptRepository||(n.scriptRepository="/data/scripts.json");var t=function(t){var i={};return new(n.cls({add:function(r,u){return typeof i[r]!="undefined"&&t&&n.error("Object already exists in cache."),i[r]=u},remove:function(n){delete i[n]},value:function(n){return i[n]||this.find(n)},find:function(n){var r=new RegExp(n+"$"),t;for(t in i)if(r.test(t))return i[t];return null},findBy:function(n,t){for(var r in i)if(i[r][n]===t)return i[r];return null},exist:function(n){return n in i},each:function(n){for(var t in i)if(n.call(i[t],t,i[t])===!1)return}}))},i=function(){var r=0,u=function(){return++r},i=new(n.cls({main:function(){var i=this;n.extend(this,{scriptCache:new t,appCache:new t,repository:{},initialized:!1}),this.deferred=n.getJSON(n.scriptRepository).done(function(n){i.repository=n,i.initialized=!0}).promise()},load:function(t,i){var u=this,r=n.Deferred(),f,e,o;return this.initialized?typeof t=="number"?this.appCache.value(t):(f=this.appCache.findBy("__name__",t),f!=null&&f.singleton===!0)?r.resolve(f):(t in this.repository||this.scriptCache.exist(t)||r.reject(t,"Script not found"),e=function(){var n=u.scriptCache.value(t),f=u.createInstance(t,n,i);return r.resolve(t,"success",f)},this.scriptCache.exist(t))?e():(o=this.getScriptUrl(t),typeof o=="undefined")?r.reject(t,"Not Found"):(n.getScript(o).done(function(script){var results=eval(script);return u.scriptCache.add(t,results),e()}).fail(function(n,i,u){return r.reject(t,u)}),r):this.deferred=this.deferred.always(function(){return u.load(t,i)})},store:function(t,i,r){var u=n.cls(r,i),f;return u.singleton===!0?(f=this,n(function(){f.createInstance(t,u)}),null):this.scriptCache.add(t,u)},createInstance:function(n,t,i){var f=function(){},r;return f.prototype=t.prototype,r=new f,r.__pid__=u(),r.__name__=n,t.apply(r,i),this.appCache.add(r.__pid__,r)},getScriptUrl:function(n){return this.repository[n]}}));return function(t,r,u){return(typeof t!="string"&&typeof t!="number"&&n.error("Script name must be provided"),n.isNumeric(t)&&(t=parseInt(t)),(typeof r=="undefined"||typeof r.splice=="function")&&typeof u=="undefined")?i.load(t,r):(typeof u=="undefined"&&(u=r,r=null),i.store(t,r,u))}};n.extend({factory:new i})})(jQuery);
//@ sourceMappingURL=jQuery.oop.factory.min.js.map